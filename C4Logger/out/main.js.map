{"version":3,"file":"main.js","sourceRoot":"","sources":["../src/main.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,uCAAyC;AACzC,gCAAyC;AACzC,yBAAoC;AAGpC,0DAA0D;AAE1D,iDAAiD;AAEjD,iBAAiB;AACjB,0BAA0B;AAC1B,uBAAuB;AACvB,mCAAmC;AACnC,sBAAsB;AACtB,yBAAyB;AACzB,0BAA0B;AAC1B,IAAI;AAEJ,kCAAkC;AAClC,sCAAsC;AACtC,oCAAoC;AACpC,qBAAqB;AACrB,wCAAwC;AACxC,YAAY;AAEZ;;QACI,IAAI,GAAG,GAAG,IAAI,CAAC;QACf,IAAI,CAAC;YACD,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,YAAY,CAAC,uBAAuB,EAAE,MAAM,CAAC,CAAC,CAAC;YACtE,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;QACrC,CAAC;QAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACb,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACnB,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;QACrB,CAAC;QAED,IAAI,SAAS,GAAG,IAAI,QAAQ,CAAC,QAAQ,EAAE,CAAC;QACxC,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAA;QAC7B,MAAM,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC1B,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAEpB,IAAI,UAAU,GAAwC;YAClD,IAAI,EAAG,kBAAkB;YACzB,OAAO,EAAG,OAAO;YACjB,KAAK,EAAG,MAAM;YACd,KAAK,EAAG,WAAW;YACnB,IAAI,EAAG,WAAW;YAClB,IAAI,EAAG,IAAI;YACX,MAAM,EAAG,GAAG;YACZ,SAAS,EAAG,iBAAiB;SAChC,CAAA;QACD,MAAM,SAAS,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;QAEzC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACzB,SAAS,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,IAAI,EAAG,MAAM,EAAC,CAAC,CAAC;QAC5C,SAAS,CAAC,IAAI,CAAC,cAAc,EAAE,KAAK,EAAE,EAAE,IAAI,EAAG,MAAM,EAAC,EAAE,GAAG,EAAE;YACzD,MAAM,CAAC,kBAAkB,CAAC;QAC9B,CAAC,CAAC,CAAC;QACH,SAAS,CAAC,IAAI,CAAC,cAAc,EAAE,KAAK,EAAE,EAAE,IAAI,EAAG,MAAM,EAAC,CAAC,CAAC;QACxD,MAAM,SAAS,CAAC,eAAe,CAAC,kBAAkB,CAAC,CAAC;QACpD,SAAS,CAAC,IAAI,CAAC,cAAc,EAAE,EAAE,IAAI,EAAG,MAAM,EAAC,EAAE,EAAE,IAAI,EAAG,MAAM,EAAC,CAAC,CAAA;QAClE,SAAS,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;QACjC,MAAM,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE;YAC1B,UAAU,CAAC,GAAG,EAAE;gBACZ,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;gBAClB,SAAS,CAAC,OAAO,CAAC,aAAa,EAAE,EAAC,IAAI,EAAG,MAAM,EAAC,CAAC,CAAC;gBAClD,OAAO,EAAE,CAAC;YACd,CAAC,EAAE,IAAI,CAAC,CAAC;QACb,CAAC,CAAC,CAAC;QAEH,MAAM,SAAS,CAAC,KAAK,EAAE,CAAC;IAC5B,CAAC;CAAA;AAED,MAAM,EAAE,CAAC","sourcesContent":["import C4Logger  = require('./C4Logger');\nimport Yaml         = require('js-yaml');\nimport FS           = require('fs');\nimport C4LoggerOptions  = require('./C4LoggerOptions');\n\n// import C4LoggerOptions  = require('./C4LoggerOptions');\n\n// let CurLogger = new C4Log2Files.C4Log2Files();\n\n// let Config = {\n//     maxsize     : 1024,\n//     maxFiles    : 3,\n//     filename : './test-log.log',\n//     level : 'info',\n//     name : 'test-log',\n//     label : 'test-log',\n// }\n\n// CurLogger.init(Config, 'info');\n// CurLogger.fatal('123', { a : 123});\n// CurLogger.profile('TestProfile');\n// setTimeout(() => {\n//     CurLogger.profile('TestProfile');\n// }, 30000)\n\nasync function Launch() {\n    let doc = null;\n    try {\n        doc = Yaml.safeLoad(FS.readFileSync('./Config/C4Logger.yml', 'utf8'));\n        console.log(JSON.stringify(doc));\n    } catch (error) {\n        console.log(error);\n        process.exit(-1);\n    }\n\n    let CurLogger = new C4Logger.C4Logger();\n    console.log('begin init....')\n    await CurLogger.init(doc);\n    console.log('init');\n\n    let TempConfig : C4LoggerOptions.RedisLoggerOptions = {\n        name : 'custom-logger-02',\n        logtype : 'redis',\n        level : 'info',\n        label : 'custom-02',\n        host : '10.0.0.95',\n        port : 6379,\n        length : 300,\n        container : 'test-custom-log'\n    }\n    await CurLogger.addTransport(TempConfig);\n\n    CurLogger.info('123456');\n    CurLogger.debug('test a', { type : 'test'});\n    CurLogger.info('test a -> %s', '123', { type : 'test'}, () => {\n        return 'custom-logger-00';\n    });\n    CurLogger.info('test a -> %s', '123', { type : 'test'});\n    await CurLogger.removeTransport('custom-logger-01');\n    CurLogger.info('test b -> %j', { type : 'test'}, { type : 'test'})\n    CurLogger.profile('testProfile');\n    await new Promise((resolve) => {\n        setTimeout(() => {\n            console.log('123')\n            CurLogger.profile('testProfile', {type : 'test'});\n            resolve();\n        }, 4000);\n    });\n\n    await CurLogger.close();\n}\n\nLaunch();\n"]}